<div *ngIf="!sent" class="container">
  <div class="row">
    <div class="col-xs-12">
      <form #f="ngForm" class="example-form">
        <pre [@bounceOnEnter] [@bounceOutOnLeave] *ngIf="isBackendDown"
          style="color: red">Krijg je niks? Laad de pagina opnieuw... (F5)</pre>
        <div class="container">
          <div *ngIf="!wantsOne&&!wantsAll">
            <mat-grid-list cols="2" rowHeight="2:1">
              <mat-card class="example-card whiteish">
                <mat-card-title-group class="whiteish">
                  <mat-card-subtitle class="whiteish">Manage</mat-card-subtitle>
                  <mat-card-title class="whiteish">P-O</mat-card-title>
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                    <!--! Font Awesome Pro 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
                    <path
                      d="M256.1 246c-13.25 0-23.1 10.75-23.1 23.1c1.125 72.25-8.124 141.9-27.75 211.5C201.7 491.3 206.6 512 227.5 512c10.5 0 20.12-6.875 23.12-17.5c13.5-47.87 30.1-125.4 29.5-224.5C280.1 256.8 269.4 246 256.1 246zM255.2 164.3C193.1 164.1 151.2 211.3 152.1 265.4c.75 47.87-3.75 95.87-13.37 142.5c-2.75 12.1 5.624 25.62 18.62 28.37c12.1 2.625 25.62-5.625 28.37-18.62c10.37-50.12 15.12-101.6 14.37-152.1C199.7 238.6 219.1 212.1 254.5 212.3c31.37 .5 57.24 25.37 57.62 55.5c.8749 47.1-2.75 96.25-10.62 143.5c-2.125 12.1 6.749 25.37 19.87 27.62c19.87 3.25 26.75-15.12 27.5-19.87c8.249-49.1 12.12-101.1 11.25-151.1C359.2 211.1 312.2 165.1 255.2 164.3zM144.6 144.5C134.2 136.1 119.2 137.6 110.7 147.9C85.25 179.4 71.38 219.3 72 259.9c.6249 37.62-2.375 75.37-8.999 112.1c-2.375 12.1 6.249 25.5 19.25 27.87c20.12 3.5 27.12-14.87 27.1-19.37c7.124-39.87 10.5-80.62 9.749-121.4C119.6 229.3 129.2 201.3 147.1 178.3C156.4 167.9 154.9 152.9 144.6 144.5zM253.1 82.14C238.6 81.77 223.1 83.52 208.2 87.14c-12.87 2.1-20.87 15.1-17.87 28.87c3.125 12.87 15.1 20.75 28.1 17.75C230.4 131.3 241.7 130 253.4 130.1c75.37 1.125 137.6 61.5 138.9 134.6c.5 37.87-1.375 75.1-5.624 113.6c-1.5 13.12 7.999 24.1 21.12 26.5c16.75 1.1 25.5-11.87 26.5-21.12c4.625-39.75 6.624-79.75 5.999-119.7C438.6 165.3 355.1 83.64 253.1 82.14zM506.1 203.6c-2.875-12.1-15.51-21.25-28.63-18.38c-12.1 2.875-21.12 15.75-18.25 28.62c4.75 21.5 4.875 37.5 4.75 61.62c-.1249 13.25 10.5 24.12 23.75 24.25c13.12 0 24.12-10.62 24.25-23.87C512.1 253.8 512.3 231.8 506.1 203.6zM465.1 112.9c-48.75-69.37-128.4-111.7-213.3-112.9c-69.74-.875-134.2 24.84-182.2 72.96c-46.37 46.37-71.34 108-70.34 173.6l-.125 21.5C-.3651 281.4 10.01 292.4 23.26 292.8C23.51 292.9 23.76 292.9 24.01 292.9c12.1 0 23.62-10.37 23.1-23.37l.125-23.62C47.38 193.4 67.25 144 104.4 106.9c38.87-38.75 91.37-59.62 147.7-58.87c69.37 .1 134.7 35.62 174.6 92.37c7.624 10.87 22.5 13.5 33.37 5.875C470.1 138.6 473.6 123.8 465.1 112.9z" />
                  </svg>
                </mat-card-title-group>
                <mat-card-content>
                  <p class="whiteish">Facturen sturen, makkelijk!</p>
                </mat-card-content>
                <mat-divider inset></mat-divider>
                <mat-card-actions class="whiteish">
                  <button (click)="onUserWantsOne()" type="button" mat-raised-button color="accent">One PO</button>
                </mat-card-actions>
                <mat-card-actions class="whiteish">
                  <button (click)="onUserWantsAll()" type="button" mat-raised-button color="accent">Multiple
                    POs</button>
                </mat-card-actions>
                <mat-card-footer>
                  <mat-progress-bar mode="buffer"></mat-progress-bar>
                </mat-card-footer>
              </mat-card>
            </mat-grid-list>
          </div>
          <!-- PO -->
          <div *ngIf="wantsOne">
            <mat-form-field [@fadeInLeftOnEnter] class="example-full-width" appearance="fill">
              <mat-label>PO Nr</mat-label>
              <input required type="text" placeholder="Pick one" aria-label="Number" matInput #klantnaam
                [(ngModel)]="u_ID" name="u_ID" [formControl]="myControl3" [matAutocomplete]="auto3">
              <mat-autocomplete #auto3="matAutocomplete">
                <mat-option *ngFor="let ID of filteredOptions3 | async" [value]="ID">
                  {{ID}}
                </mat-option>
              </mat-autocomplete>
            </mat-form-field>
            <div *ngIf="isID">
              <mat-chip-list class="example-chip" cdkDropList cdkDropListOrientation="horizontal">
                <mat-chip class="example-box" cdkDrag>
                  {{selectedPO.requested_by}}
                </mat-chip>
                <mat-chip class="example-box" cdkDrag>
                  {{selectedPO.datum}}
                </mat-chip>
                <mat-chip class="example-box short-txt" cdkDrag>
                  {{selectedPO.company}}
                </mat-chip>
                <mat-chip class="example-box" cdkDrag>
                  {{selectedPO.short_text}}
                </mat-chip>
                <mat-chip class="example-box" cdkDrag>
                  €{{selectedPO.overall_limit}}
                </mat-chip>
                <mat-chip class="example-box" cdkDrag>
                  {{selectedPO.sbu}}
                </mat-chip>
                <hr>
                <div *ngIf="selectedPO.invoice!=='Pending'">
                  <svg style="width:32px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">

                    <path
                      d="M243.8 339.8C232.9 350.7 215.1 350.7 204.2 339.8L140.2 275.8C129.3 264.9 129.3 247.1 140.2 236.2C151.1 225.3 168.9 225.3 179.8 236.2L224 280.4L332.2 172.2C343.1 161.3 360.9 161.3 371.8 172.2C382.7 183.1 382.7 200.9 371.8 211.8L243.8 339.8zM512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256zM256 48C141.1 48 48 141.1 48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48z" />
                  </svg>
                  <h3 style="color:green">{{postatus}}</h3>
                </div>
                <div class="" *ngIf="selectedPO.invoice==='Pending'">
                  <svg style="width:32px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">

                    <path
                      d="M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z" />
                  </svg>
                  <h3 style="color:goldenrod;">{{postatus}}</h3>
                </div>
              </mat-chip-list>
              <mat-card-actions *ngIf="postatus!='Al gestuurd/Déjà envoyé'" class="whiteish">
                <ngx-dropzone (change)="onFileSelected($event)">
                  <ngx-dropzone-label>Factuur inslepen / Déposez la facture</ngx-dropzone-label>
                  <ngx-dropzone-preview *ngFor="let f of selected_files; let i = index" [removable]="true">
                    <ngx-dropzone-label>{{ f.name }} ({{ f.type }})
                      <button (click)="onFileRemoved($event,i)">❌</button>
                    </ngx-dropzone-label>
                  </ngx-dropzone-preview>
                </ngx-dropzone>
              </mat-card-actions>
              <mat-card-actions *ngIf="postatus=='Al gestuurd/Déjà envoyé'" class="whiteish">
                <h2>Invoice already sent... Cannot re-send it.</h2>
                <h3>For questions, contact <a
                    href="mailto:S-GTS-APBelgium@sbdinc.com">S-GTS-APBelgium@sbdinc.com</a>(BE) / <a
                    href="mailto:S-GTS-APNetherlands@sbdinc.com">S-GTS-APNetherlands@sbdinc.com</a>(NL)</h3>
              </mat-card-actions>
              <button
                [disabled]="!selected_files.length || !isFormValidWithFile || isBezig || postatus=='Al gestuurd/Déjà envoyé'"
                (click)="onSubmitDrag(u_ID)" mat-raised-button color="primary">Send</button>
              <pre [@bounceOnEnter] [@bounceOutOnLeave] *ngIf="isBezig"
                style="color: white;background: black;">Bezig / Attendre quelques instants</pre>
            </div>
          </div>
          <div *ngIf="wantsAll">
            <mat-form-field [@fadeInLeftOnEnter] class="example-full-width" appearance="fill">
              <mat-label>Choose all POs you want to send PDFs</mat-label>
              <mat-select [formControl]="myControl3_multiple" required multiple id="poNr" name="poNr"
                [(ngModel)]="selectedIDs" #klantnaam>
                <mat-option *ngFor="let ID of filteredOptions3 | async" [value]="ID">
                  {{ID}}
                </mat-option>
              </mat-select>
            </mat-form-field>
            <div *ngIf="isID">
              <mat-card-actions class="whiteish">
                <ngx-dropzone (change)="onFileSelected($event)">
                  <ngx-dropzone-label>Factuur inslepen / Déposez la facture</ngx-dropzone-label>
                  <ngx-dropzone-preview *ngFor="let f of selected_files; let i = index" [removable]="true">
                    <ngx-dropzone-label>{{ f.name }} ({{ f.type }})
                      <button (click)="onFileRemoved($event,i)">❌</button>
                    </ngx-dropzone-label>
                  </ngx-dropzone-preview>
                </ngx-dropzone>
              </mat-card-actions>
              <button [disabled]="!selected_files.length || !isFormValidWithFile || isBezig"
                (click)="onSubmitDragMultiple(selectedIDs)" mat-raised-button color="primary">Send All</button>
              <pre [@bounceOnEnter] [@bounceOutOnLeave] *ngIf="isBezig"
                style="color: white;background: black;">Bezig / Attendre quelques instants</pre>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<div style="margin-top: 10%" *ngIf="sent&&!fakemodal" class="container loading">
  <div class="row justify-content-center">
    <div *ngIf="!exit" class="lds-grid">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>
    <svg *ngIf="exit" class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
      <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none" />
      <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
    </svg>
    <h1 *ngIf="!exit">Aan het laden...</h1>
    <h1 *ngIf="exit">Geladen.</h1>
  </div>
</div>
<div *ngIf="fakemodal" class="fakemodal">
  <div class="modal-init">
    <div class="modal-body">
      <mat-card class="example-card">
        <mat-card-header class="d-block mx-auto">
          <mat-card-title>Optical Character Recognition for PO</mat-card-title>
          <mat-card-subtitle>Legitimate invoice (PO detected in Green)</mat-card-subtitle>
        </mat-card-header>
        <img class="d-block mx-auto" mat-card-image [src]="imageSafeUrl" alt="Photo of a Shiba Inu">
        <mat-card-actions>
          <button mat-button>Send</button>
          <button mat-button>Cancel</button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>
<!-- <button type="button" (click)="onOpnieuwFactuur()" mat-raised-button color="accent">Nieuwe aanvraag / Autre Demande</button> -->